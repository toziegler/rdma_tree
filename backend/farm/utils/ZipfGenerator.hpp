#pragma once
// -------------------------------------------------------------------------------------
#include "Defs.hpp"
// -------------------------------------------------------------------------------------
#include <cstdint>
#include <random>
// -------------------------------------------------------------------------------------
namespace farm
{
namespace utils
{
// -------------------------------------------------------------------------------------
// A Zipf distributed random number generator
// Based on Jim Gray Algorithm as described in "Quickly Generating Billion-Record..."
// -------------------------------------------------------------------------------------
class ZipfGenerator
{
   // -------------------------------------------------------------------------------------
  private:
   double n;
   double theta;
   // -------------------------------------------------------------------------------------
   double alpha, zetan, eta;
   // -------------------------------------------------------------------------------------
   double zeta(double n, double theta);

  public:
   // [0, n)
   ZipfGenerator(double ex_n, double theta);
   // uint64_t rand(u64 new_n);
   uint64_t rand();
};
// -------------------------------------------------------------------------------------
}  // namespace utils
}  // namespace farm
   // -------------------------------------------------------------------------------------
